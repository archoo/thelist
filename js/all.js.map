{"version":3,"sources":["script.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["var txt = '';\r\nvar ttFade = 0;\r\nvar ttTimer = 0;\r\nvar boxFade = 0;\r\nvar boxTimer = 0;\r\nvar popup = document.getElementById('popup');\r\nvar curr = -1;\r\nvar item = null;\r\nvar hlcurr = false;\r\n\r\nfunction showTxt() {\r\n  ttFade -= 1;\r\n  if (ttFade <= 0) {\r\n    popup.style.visibility = 'hidden';\r\n    clearInterval(ttTimer);\r\n    ttTimer = 0;\r\n  }\r\n}\r\n\r\nfunction showBox() {\r\n  boxFade -= 1;\r\n  if (boxFade <= 0) {\r\n    item.style.border = '';    \r\n    hlcurr = false;\r\n    clearInterval(boxTimer);\r\n    boxTimer = 0;\r\n  }\r\n}\r\n\r\nfunction handleKey(e) {\r\n  if (e.key == 'Enter') {\r\n    if (txt != '') document.getElementById('today').insertAdjacentHTML('afterbegin','<span>'+txt+'</span>');\r\n    txt = '';\r\n  }\r\n  if (e.key == 'Backspace') {\r\n    txt = txt.substr(0,txt.length-1);\r\n    popup.textContent = txt;\r\n    e.preventDefault();\r\n  }\r\n  if (e.key == 'Escape') {\r\n    txt = '';\r\n    popup.style.visibility = 'hidden';\r\n  }\r\n  if (e.key == 'ArrowUp') {\r\n    if (item) item.style.border = '';\r\n    curr--;\r\n    curr = Math.max(0,curr);\r\n    item = document.getElementsByTagName('span')[curr];\r\n    item.style.border = '1px solid yellow';\r\n    hlcurr = true;\r\n    boxFade = 3;\r\n    if (boxTimer == 0) { boxTimer = setInterval(showBox,1000); }\r\n  }\r\n  if (e.key == 'ArrowDown') {\r\n    if (item) item.style.border = '';\r\n    var l = document.getElementsByTagName('span').length;\r\n    curr++\r\n    curr = Math.min(l-1,curr);\r\n    item = document.getElementsByTagName('span')[curr];\r\n    item.style.border = '1px solid yellow';\r\n    hlcurr = true;\r\n    boxFade = 3;\r\n    if (boxTimer == 0) { boxTimer = setInterval(showBox,1000); }\r\n  }\r\n  if (e.key == 'ArrowLeft') {\r\n    if (hlcurr) {\r\n      if (item.style.textDecoration == '') item.remove();\r\n      if (item.style.textDecoration == 'line-through') {\r\n        if (item.parentElement.id == 'done') document.getElementById('today').insertAdjacentElement('beforeend',item);\r\n        else item.style.textDecoration = '';\r\n      }\r\n    boxFade = 3;\r\n    }    \r\n  }\r\n  if (e.key == 'ArrowRight') {\r\n    if (hlcurr) {\r\n      if (item.style.textDecoration == 'line-through') {\r\n        if (item.parentElement.id == 'today') document.getElementById('done').insertAdjacentElement('afterbegin',item);\r\n      }\r\n      if (item.style.textDecoration == '') item.style.textDecoration = 'line-through';\r\n    boxFade = 3;\r\n    }\r\n  }\r\n}\r\n\r\nfunction handleText(e) {\r\n  if (e.charCode > 31 && e.charCode < 127) {\r\n    txt = txt.concat(e.key);\r\n    popup.textContent = txt;\r\n    popup.style.visibility = 'visible';\r\n    ttFade = 3;\r\n    if (ttTimer == 0) { ttTimer = setInterval(showTxt, 1000); }\r\n    }\r\n}\r\n\r\nwindow.addEventListener('keypress', handleText);\r\nwindow.addEventListener('keydown', handleKey);\r\nwindow.addEventListener('load', () => {\r\n  document.getElementById('today').innerHTML = JSON.parse(localStorage.getItem('thelist'));\r\n  for (const s of document.getElementsByTagName('span')) s.style.border = 'none';\r\n  });\r\n\r\nnew MutationObserver((m) => {saveList();}).observe(document.getElementById('today'), { attributes: true, childList: true, subtree: true });\r\n\r\nfunction saveList() {\r\n  localStorage.setItem('thelist',JSON.stringify(document.getElementById('today').innerHTML));\r\n}\r\n"]}